// LAB.js (LABjs :: Loading And Blocking JavaScript) | v1.0.2rc1 (c) Kyle Simpson | MIT License
(function(c){var g="string",j="head",s="body",U="script",O="readyState",R="preloaddone",C="loadtrigger",J="srcuri",G="preload",t="complete",e="done",b="which",u="preserve",n="onreadystatechange",K="onload",H="hasOwnProperty",D="script/cache",f="[object ",L=f+"Function]",E=f+"Array]",x=null,M,F=true,y=false,m=c.document,N=c.location,S=c.ActiveXObject,d=c.setTimeout,B=c.clearTimeout,T=function(V){return m.getElementsByTagName(V)},q=Object.prototype.toString,r=function(){},v={},z={},a=/^[^?#]*\//.exec(N.href)[0],w=/^\w+\:\/\/\/?[^\/]+/.exec(a)[0],Q=T(U),o=c.opera&&q.call(c.opera)===f+"Opera]",p=(function(V){V[V]=V+"";return V[V]!==V+""}(String("__count__"))),l={cache:!(p||o),order:p||o,xhr:F,dupe:F,base:"",which:j};l[u]=y;l[G]=F;v[j]=T(j);v[s]=T(s);function P(V){return q.call(V)===L}function A(Y,X){var W=/^\w+\:\/\//,V;if(typeof Y!==g){Y=""}if(typeof X!==g){X=""}V=(W.test(Y)?"":X)+Y;return((W.test(V)?"":(V.charAt(0)==="/"?w:a))+V)}function I(V){return A(V).indexOf(w)===0}function h(X){var W,V=0;while((W=Q[V])){V+=1;if(typeof W.src===g&&X===A(W.src)&&W.type!==D){return F}}return y}function k(az,an){az=!!az;if(an===M){an=l}var am=y,ag=az&&an[G],au=ag&&an.cache,aw=ag&&an.order,Z=ag&&an.xhr,ax=an[u],Y=an.which,aq=an.base,aa=r,ap=y,aj,ad=F,ae={},av=[],ah=x;ag=au||Z||aw;function ay(aB,aA){if((aB[O]&&aB[O]!==t&&aB[O]!=="loaded")||aA[e]){return y}aB[K]=aB[n]=x;return F}function X(aC,aB,aD){aD=!!aD;if(!aD&&!(ay(aC,aB))){return}aB[e]=F;for(var aA in ae){if(ae[H](aA)&&!(ae[aA][e])){return}}am=F;aa()}function ai(aA){if(P(aA[C])){aA[C]();aA[C]=x}}function af(aB,aA){if(!ay(aB,aA)){return}aA[R]=F;d(function(){v[aA[b]].removeChild(aB);ai(aA)},0)}function V(aB,aA){if(aB[O]===4){aB[n]=r;aA[R]=F;d(function(){ai(aA)},0)}}function at(aC,aF,aD,aG,aE,aA){var aB=aC[b];d(function(){if("item" in v[aB]){if(!v[aB][0]){d(arguments.callee,25);return}v[aB]=v[aB][0]}var aH=m.createElement(U);aH.type=aD;if(typeof aG===g){aH.charset=aG}if(P(aE)){aH[K]=aH[n]=function(){aE(aH,aC)};aH.src=aF}v[aB].insertBefore(aH,(aB===j?v[aB].firstChild:x));if(typeof aA===g){aH.text=aA;X(aH,aC,F)}},0)}function al(aA,aC,aB,aD){z[aA[J]]=F;at(aA,aC,aB,aD,X)}function ar(aB,aD,aC,aE){var aA=arguments;if(ad&&aB[R]===M){aB[R]=y;at(aB,aD,D,aE,af)}else{if(!ad&&aB[R]!==M&&!aB[R]){aB[C]=function(){ar.apply(x,aA)}}else{if(!ad){al.apply(x,aA)}}}}function W(aB,aE,aC,aF){var aA=arguments,aD;if(ad&&aB[R]===M){aB[R]=y;aD=aB.xhr=(S?new S("Microsoft.XMLHTTP"):new c.XMLHttpRequest());aD[n]=function(){V(aD,aB)};aD.open("GET",aE);aD.send("")}else{if(!ad&&aB[R]!==M&&!aB[R]){aB[C]=function(){W.apply(x,aA)}}else{if(!ad){z[aB[J]]=F;at(aB,aE,aC,aF,x,aB.xhr.responseText);aB.xhr=x}}}}function ak(aG){if(aG.allowDup===M){aG.allowDup=an.dupe}var aF=aG.src,aD=aG.type,aH=aG.charset,aB=aG.allowDup,aA=A(aF,aq),aC,aE=I(aA);if(typeof aD!==g){aD="text/javascript"}if(typeof aH!==g){aH=x}aB=!(!aB);if(!aB&&((z[aA]!==M)||(ad&&ae[aA])||h(aA))){if(ae[aA]!==M&&ae[aA][R]&&!ae[aA][e]&&aE){X(x,ae[aA],F)}return}if(ae[aA]===M){ae[aA]={}}aC=ae[aA];if(aC[b]===M){aC[b]=Y}aC[e]=y;aC[J]=aA;ap=F;if(!aw&&Z&&aE){W(aC,aA,aD,aH)}else{if(!aw&&au){ar(aC,aA,aD,aH)}else{al(aC,aA,aD,aH)}}}function ac(aA){av.push(aA)}function ab(aA){if(az&&!aw){ac(aA)}if(!az||ag){aA()}}function ao(aC){var aB=[],aA;for(aA=0;aA<aC.length;aA+=1){if(q.call(aC[aA])===E){aB=aB.concat(ao(aC[aA]))}else{aB[aB.length]=aC[aA]}}return aB}aj={script:function(){B(ah);var aC=ao(arguments),aB=aj,aA;if(ax){for(aA=0;aA<aC.length;aA+=1){if(aA===0){ab((function(){return function(){ak((typeof aC[0]===g)?{src:aC[0]}:aC[0])}}()))}else{aB=aB.script(aC[aA])}aB=aB.wait()}}else{ab(function(){for(aA=0;aA<aC.length;aA+=1){ak((typeof aC[aA]===g)?{src:aC[aA]}:aC[aA])}})}ah=d(function(){ad=y},5);return aB},wait:function(aD){B(ah);ad=y;if(!P(aD)){aD=r}var aE=k(F,an),aA=aE.trigger,aC=function(){try{aD()}catch(aF){}aA()},aB=function(){if(ap&&!am){aa=aC}else{aC()}};delete aE.trigger;if(az&&!ap){ac(aB)}else{ab(aB)}return aE}};aj.block=aj.wait;if(az){aj.trigger=function(){var aB,aA=0;while((aB=av[aA])){aA+=1;aB()}av=[]}}return aj}function i(Z){var V,X={},W={UseCachePreload:"cache",UseLocalXHR:"xhr",UsePreloading:G,AlwaysPreserveOrder:u,AllowDuplicates:"dupe"},Y={AppendTo:b,BasePath:"base"};for(V in W){if(W[H](V)){Y[V]=W[V]}}X.order=!!l.order;for(V in Y){if(Y[H](V)&&l[Y[V]]!==M){X[Y[V]]=(Z[V]!==M)?Z[V]:l[Y[V]]}}for(V in W){if(W[H](V)){X[W[V]]=!!X[W[V]]}}if(!X[G]){X.cache=X.order=X.xhr=y}X.which=(X.which===j||X.which===s)?X.which:j;return X}c.$LAB={setGlobalDefaults:function(V){l=i(V)},setOptions:function(V){return k(y,i(V))},script:function(){return k().script.apply(x,arguments)},wait:function(){return k().wait.apply(x,arguments)}};c.$LAB.block=c.$LAB.wait;(function(X,V,W){if(m[O]===M&&m[X]){m[O]="loading";m[X](V,W=function(){m.removeEventListener(V,W,y);m[O]=t},y)}}("addEventListener","DOMContentLoaded"))}(window));