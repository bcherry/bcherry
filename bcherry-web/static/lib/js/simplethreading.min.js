(function(){var a={seed:0,current:0,threads:[],start:function(){if(this.current){return}(function(){for(var b=0;b<a.threads.length;b++){if(a.threads[b].run()===false){a.threads[b].stop(true);a.threads.splice(b,1);b--}}a.current=setTimeout(arguments.callee,0)})()},stop:function(){clearTimeout(this.current);this.current=0},add:function(b){b.__threadID=this.seed++;this.threads.push(b);this.start();return b.__threadID},remove:function(c){for(var b=0;b<a.threads.length;b++){if(a.threads[b].__threadID==c){a.threads.splice(b,1)}}}};this.SimpleThread=function(c,d){var f=this;var i=!!(d&&d.autoStart);var h=(d&&d.workArgs)||[];var g=(d&&d.log!==undefined)||false;var c=c;var j=null;var b=arguments.callee;var e=function(k){if(g&&window.console){console.log("SimpleThread #"+j+": "+k)}};this.start=function(){if(!this.isRunning()){j=a.add(f);e("started")}};this.stop=function(k){if(!k){a.remove(j)}if(f.isRunning()){e("stopped");j=null}};this.isRunning=function(){return j!==null};this.run=function(){return c.apply(b,h)};this.getBatchSize=function(){return batchSize};this.setBatchSize=function(k){batchSize=k};this.getWorkFn=function(){return c};this.setWorkFn=function(k){c=k};this.getWorkArgs=function(){return h};this.setWorkArgs=function(k){h=k};this.getThreadID=function(){return j};if(i){this.start()}}})();